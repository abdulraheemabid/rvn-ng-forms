<div class="container" *ngIf="initDone">

    <div class="attributes">
        <div class="heading">
            <h2>Attributes</h2>
            <rvn-divider></rvn-divider>
        </div>

        <rvn-accordion class="accordion">
            <rvn-accordion-panel cdkDrag>
                <span title class="title">
                    <span>
                        Form Name:
                        <span class="bold">
                            <span *ngIf="formNameCtrl?.value">{{formNameCtrl.value}}</span>
                            <span *ngIf="!formNameCtrl?.value">Not Specified</span>
                        </span>
                    </span>
                </span>
                <rvn-input content class="form-name" [params]="formNameCompParam" [formControl]="formNameCtrl">
                </rvn-input>
            </rvn-accordion-panel>
        </rvn-accordion>
    </div>

    <div class="fields">

        <div class="heading">
            <div class="flex">
                <h2>Fields</h2>
                <rvn-button (click)="addField()" class="add-field-btn" [params]="fieldAddCompParam">Add</rvn-button>
            </div>
            <rvn-divider></rvn-divider>
        </div>

        <rvn-accordion class="accordion" cdkDropList (cdkDropListDropped)="drop($event)">

            <rvn-accordion-panel cdkDrag class="field" [params]="{hasActionContent: true}"
                *ngFor="let field of fieldGroups.controls; let i = index; let last = last; let first = first">

                <span title class="title">
                    <span>
                        Field Position:
                        <span class="bold">{{i+1}}</span>
                    </span>

                    <span *ngIf="field.get('name')?.value">
                        Name:
                        <span class="bold">{{field.get('name')?.value}}</span>
                    </span>

                    <span *ngIf="field.get('type')?.value">
                        Type:
                        <span class="bold">{{field.get('type')?.value?.value}}</span>
                    </span>
                </span>


                <field-definition content [fieldFG]="field"></field-definition>

                <rvn-button actionContent (click)="deleteField(i)" [params]="deleteFieldCompParam"
                    [disabled]="first && last">
                    Delete</rvn-button>

            </rvn-accordion-panel>

        </rvn-accordion>

    </div>